import{j as e}from"./query-_HUGc1jU.js";import{g as P,u as F,r as i}from"./router-CGnu6c2M.js";import{j as w,h as S}from"./firebase-CGo28arV.js";import{d as u}from"./index-C7a0D0cT.js";import{F as a,v as G,d as B,A as $,j as q,P as I,g as L,E as O,B as k}from"./ui-ZG8wUPwK.js";import"./vendor-Dazix4UH.js";const z=()=>{const{year:b,section:j,id:n}=P(),A=F(),[s,C]=i.useState(null),[E,f]=i.useState(!0),[y,o]=i.useState(null),[l,M]=i.useState("overview"),[N,x]=i.useState([]);return i.useEffect(()=>{(async()=>{try{f(!0),o(null);let r=await w(S(u,`students/${b}/${j}/${n}`));if(r.exists()||(r=await w(S(u,`students/${n}`))),r.exists()){const c=r.data();if(C(c),Array.isArray(c.courses)&&c.courses.length>0)try{const m=c.courses.filter(Boolean),p=[];for(let d=0;d<m.length;d+=10)p.push(m.slice(d,d+10));const v=[];for(const d of p){const D=collectionGroup(u,"courseDetails");(await getDocs(query(D,where(documentId(),"in",d)))).forEach(h=>{const g=h.ref.path.split("/");v.push({id:h.id,year:g[1],section:g[2],semester:g[3],...h.data()})})}x(v)}catch{x([])}else x([])}else o("Student not found.")}catch(r){console.error("Error fetching student details:",r),o("Failed to fetch student details.")}finally{f(!1)}})()},[n]),E?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-6 animate-pulse"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading student details..."})]})}):y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:e.jsx("div",{className:"text-blue-600 text-xl font-semibold mb-2",children:y})})}):s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-12 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:()=>A(-1),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-100 text-gray-700",children:[e.jsx(a,{icon:G}),"Back"]}),e.jsx("div",{className:"w-16 h-16 card-blue rounded-full flex items-center justify-center shadow-lg",children:e.jsx(a,{icon:B,className:"text-white text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-800 mb-2",children:s.name||"Student"}),e.jsxs("p",{className:"text-gray-600 text-lg flex items-center gap-2",children:[e.jsx(a,{icon:$,className:"text-blue-600"}),s.rollNo||"Roll No —"," • ",b,"-",j]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl px-6 py-4 border border-gray-100 text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Attendance"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.attendancePercentage??"—","%"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl px-6 py-4 border border-gray-100 text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"CGPA"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.cgpa??"—"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl px-6 py-4 border border-gray-100 text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Year-Section"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.year||"—","-",s.section||"—"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-2 mb-8 border border-gray-100",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"overview",label:"Overview"},{key:"attendance",label:"Attendance"},{key:"grades",label:"Grades"},{key:"courses",label:"Courses"},{key:"contacts",label:"Contacts"}].map(t=>e.jsx("button",{onClick:()=>M(t.key),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${l===t.key?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:t.label},t.key))})}),l==="overview"&&e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx("img",{src:s.profilePicture||"https://via.placeholder.com/150",alt:"Profile",className:"w-24 h-24 rounded-full border border-gray-200"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(a,{icon:q,className:"text-blue-600"})," ",s.email||"—"]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx(a,{icon:I,className:"text-blue-600"})," ",s.studentMobile||"—"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Father's Name"}),e.jsx("div",{className:"text-gray-800 font-medium",children:s.fatherName||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Mother's Name"}),e.jsx("div",{className:"text-gray-800 font-medium",children:s.motherName||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Father's Mobile"}),e.jsx("div",{className:"text-gray-800 font-medium",children:s.fatherMobile||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("div",{className:"text-gray-800",children:s.address||"—"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{className:"btn-campus-primary px-4 py-3 rounded-xl",children:"Message Student"}),e.jsx("button",{className:"btn-campus-primary px-4 py-3 rounded-xl",children:"View Attendance"}),e.jsx("button",{className:"btn-campus-primary px-4 py-3 rounded-xl",children:"View Grades"})]})]})]}),l==="attendance"&&e.jsxs("section",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(a,{icon:L,className:"text-blue-600"})," Attendance"]}),e.jsx("div",{className:"text-gray-600",children:"No detailed attendance data available."})]}),l==="grades"&&e.jsxs("section",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(a,{icon:O,className:"text-blue-600"})," Grades"]}),e.jsx("div",{className:"text-gray-600",children:"No grade records available."})]}),l==="courses"&&e.jsxs("section",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(a,{icon:k,className:"text-blue-600"})," Courses"]}),N.length===0?e.jsx("div",{className:"text-gray-600",children:"No enrolled courses found."}):e.jsx("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:N.map((t,r)=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("div",{className:"w-10 h-10 card-blue rounded-full flex items-center justify-center",children:e.jsx(a,{icon:k,className:"text-white"})})}),e.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:t.courseName||t.id}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:t.courseCode||"—"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.year,"-",t.section," • ",t.semester?.toUpperCase?.()||t.semester||"—"]})]},t.id))})]}),l==="contacts"&&e.jsxs("section",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Contacts"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("div",{className:"text-gray-800 font-medium",children:s.email||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Student Mobile"}),e.jsx("div",{className:"text-gray-800 font-medium",children:s.studentMobile||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Father Mobile"}),e.jsx("div",{className:"text-gray-800 font-medium",children:s.fatherMobile||"—"})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:e.jsx("div",{className:"text-gray-700 text-xl font-semibold",children:"Student not found."})})})};export{z as default};
//# sourceMappingURL=StudentDetails-CcKABP5h.js.map
