import{j as e}from"./query-_HUGc1jU.js";import{g as F,u as G,r as c}from"./router-CGnu6c2M.js";import{j as w,h as k}from"./firebase-CGo28arV.js";import{d as b}from"./index-DAak1JJl.js";import{F as r,B as P,e as B,E as $,k as q,Q as I,h as L,z as O,t as S}from"./ui-BE1NG-gw.js";import"./vendor-Dazix4UH.js";const _=()=>{const{year:f,section:p,id:n}=F(),C=G(),[s,A]=c.useState(null),[E,j]=c.useState(!0),[N,o]=c.useState(null),[d,M]=c.useState("overview"),[g,x]=c.useState([]);return c.useEffect(()=>{(async()=>{try{j(!0),o(null);let a=await w(k(b,`students/${f}/${p}/${n}`));if(a.exists()||(a=await w(k(b,`students/${n}`))),a.exists()){const i=a.data();if(A(i),Array.isArray(i.courses)&&i.courses.length>0)try{const m=i.courses.filter(Boolean),v=[];for(let l=0;l<m.length;l+=10)v.push(m.slice(l,l+10));const y=[];for(const l of v){const D=collectionGroup(b,"courseDetails");(await getDocs(query(D,where(documentId(),"in",l)))).forEach(h=>{const u=h.ref.path.split("/");y.push({id:h.id,year:u[1],section:u[2],semester:u[3],...h.data()})})}x(y)}catch{x([])}else x([])}else o("Student not found.")}catch(a){console.error("Error fetching student details:",a),o("Failed to fetch student details.")}finally{j(!1)}})()},[n]),E?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-surface rounded-2xl shadow-xl p-12 text-center border border-theme",children:[e.jsx("div",{className:"w-16 h-16 bg-surface rounded-full mx-auto mb-6 animate-pulse"}),e.jsx("p",{className:"text-secondary text-lg",children:"Loading student details..."})]})}):N?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:e.jsx("div",{className:"bg-surface rounded-2xl shadow-xl p-12 text-center border border-theme",children:e.jsx("div",{className:"text-primary text-xl font-semibold mb-2",children:N})})}):s?e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-12 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:()=>C(-1),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-theme hover:bg-surface text-primary",children:[e.jsx(r,{icon:P}),"Back"]}),e.jsx("div",{className:"w-16 h-16 card-blue rounded-full flex items-center justify-center shadow-lg",children:e.jsx(r,{icon:B,className:"text-white text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-primary mb-2",children:s.name||"Student"}),e.jsxs("p",{className:"text-secondary text-lg flex items-center gap-2",children:[e.jsx(r,{icon:$,className:"text-blue-600"}),s.rollNo||"Roll No —"," • ",f,"-",p]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-surface rounded-2xl shadow-xl px-6 py-4 border border-theme text-center",children:[e.jsx("div",{className:"text-sm text-secondary",children:"Attendance"}),e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[s.attendancePercentage??"—","%"]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl shadow-xl px-6 py-4 border border-theme text-center",children:[e.jsx("div",{className:"text-sm text-secondary",children:"CGPA"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:s.cgpa??"—"})]}),e.jsxs("div",{className:"bg-surface rounded-2xl shadow-xl px-6 py-4 border border-theme text-center",children:[e.jsx("div",{className:"text-sm text-secondary",children:"Year-Section"}),e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[s.year||"—","-",s.section||"—"]})]})]})]}),e.jsx("div",{className:"bg-surface rounded-2xl shadow-xl p-2 mb-8 border border-theme",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"overview",label:"Overview"},{key:"attendance",label:"Attendance"},{key:"grades",label:"Grades"},{key:"courses",label:"Courses"},{key:"contacts",label:"Contacts"}].map(t=>e.jsx("button",{onClick:()=>M(t.key),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${d===t.key?"btn-secondary text-white":"text-primary hover:bg-surface"}`,children:t.label},t.key))})}),d==="overview"&&e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-2xl shadow-xl p-8 border border-theme",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx("img",{src:s.profilePicture||"https://via.placeholder.com/150",alt:"Profile",className:"w-24 h-24 rounded-full border border-theme"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-primary",children:[e.jsx(r,{icon:q,className:"text-[var(--color-primary)]"})," ",s.email||"—"]}),e.jsxs("div",{className:"flex items-center gap-3 text-primary",children:[e.jsx(r,{icon:I,className:"text-[var(--color-primary)]"})," ",s.studentMobile||"—"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Father's Name"}),e.jsx("div",{className:"text-primary font-medium",children:s.fatherName||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Mother's Name"}),e.jsx("div",{className:"text-primary font-medium",children:s.motherName||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Father's Mobile"}),e.jsx("div",{className:"text-primary font-medium",children:s.fatherMobile||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Address"}),e.jsx("div",{className:"text-primary",children:s.address||"—"})]})]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl shadow-xl p-8 border border-theme",children:[e.jsx("h2",{className:"text-xl font-bold text-primary mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{className:"btn-primary px-4 py-3 rounded-xl",children:"Message Student"}),e.jsx("button",{className:"btn-primary px-4 py-3 rounded-xl",children:"View Attendance"}),e.jsx("button",{className:"btn-primary px-4 py-3 rounded-xl",children:"View Grades"})]})]})]}),d==="attendance"&&e.jsxs("section",{className:"bg-surface rounded-2xl shadow-xl p-8 border border-theme",children:[e.jsxs("h2",{className:"text-xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(r,{icon:L,className:"text-[var(--color-primary)]"})," Attendance"]}),e.jsx("div",{className:"text-secondary",children:"No detailed attendance data available."})]}),d==="grades"&&e.jsxs("section",{className:"bg-surface rounded-2xl shadow-xl p-8 border border-theme",children:[e.jsxs("h2",{className:"text-xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(r,{icon:O,className:"text-[var(--color-primary)]"})," Grades"]}),e.jsx("div",{className:"text-secondary",children:"No grade records available."})]}),d==="courses"&&e.jsxs("section",{className:"bg-surface rounded-2xl shadow-xl p-8 border border-theme",children:[e.jsxs("h2",{className:"text-xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(r,{icon:S,className:"text-[var(--color-primary)]"})," Courses"]}),g.length===0?e.jsx("div",{className:"text-secondary",children:"No enrolled courses found."}):e.jsx("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:g.map((t,a)=>e.jsxs("div",{className:"bg-background border border-theme rounded-xl p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("div",{className:"w-10 h-10 card-blue rounded-full flex items-center justify-center",children:e.jsx(r,{icon:S,className:"text-white"})})}),e.jsx("div",{className:"text-lg font-semibold text-primary mb-1",children:t.courseName||t.id}),e.jsx("div",{className:"text-sm text-secondary mb-2",children:t.courseCode||"—"}),e.jsxs("div",{className:"text-sm text-secondary",children:[t.year,"-",t.section," • ",t.semester?.toUpperCase?.()||t.semester||"—"]})]},t.id))})]}),d==="contacts"&&e.jsxs("section",{className:"bg-surface rounded-2xl shadow-xl p-8 border border-theme",children:[e.jsx("h2",{className:"text-xl font-bold text-primary mb-6",children:"Contacts"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Email"}),e.jsx("div",{className:"text-primary font-medium",children:s.email||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Student Mobile"}),e.jsx("div",{className:"text-primary font-medium",children:s.studentMobile||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-secondary",children:"Father Mobile"}),e.jsx("div",{className:"text-primary font-medium",children:s.fatherMobile||"—"})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:e.jsx("div",{className:"bg-surface rounded-2xl shadow-xl p-12 text-center border border-theme",children:e.jsx("div",{className:"text-primary text-xl font-semibold",children:"Student not found."})})})};export{_ as default};
//# sourceMappingURL=StudentDetails-BhFiKP1f.js.map
