import{j as e}from"./query-_HUGc1jU.js";import{r as i,L as d}from"./router-CGnu6c2M.js";import{F as t,s as L,h as g,G as v,w,x as Q,g as $,p as G,H as O,o as q,E as C,e as z,B as H,b as U}from"./ui-ZG8wUPwK.js";import{a as k,d as h}from"./index-C7a0D0cT.js";import{o as V,m as p,q as E,w as S,l as M,t as J}from"./firebase-CGo28arV.js";import"./vendor-Dazix4UH.js";const ae=()=>{const[f,b]=i.useState([]),[D,o]=i.useState(!0),[j,m]=i.useState(null),[N,A]=i.useState([]),[x,u]=i.useState(!1),[a,l]=i.useState({courseId:"",courseName:"",examType:"Mid-term",date:"",time:"",location:"",syllabus:"",examPattern:"",duration:"",totalMarks:"",instructions:""});i.useEffect(()=>{(async()=>{try{o(!0),m(null),V(k,async r=>{if(!r){m("No user is logged in."),o(!1);return}const n=p(h,"courses"),F=E(n,S("instructor","==",r.uid)),I=(await M(F)).docs.map(c=>({id:c.id,...c.data()}));A(I);const R=p(h,"exams"),B=E(R,S("facultyId","==",r.uid)),y=(await M(B)).docs.map(c=>({id:c.id,...c.data()}));y.length===0?b([{id:1,courseName:"Introduction to Computer Science",examType:"Mid-term",date:"2024-08-15",time:"10:00 AM",location:"Room 101",syllabus:"Chapters 1-5",examPattern:"Multiple Choice, Short Answer",duration:"2 hours",totalMarks:"50",students:[{id:1,name:"Alice Johnson"},{id:2,name:"Bob Smith"}]},{id:2,courseName:"Data Structures and Algorithms",examType:"Final",date:"2024-09-20",time:"2:00 PM",location:"Room 205",syllabus:"Chapters 6-10",examPattern:"Programming, Theory",duration:"3 hours",totalMarks:"100",students:[{id:3,name:"Charlie Brown"},{id:4,name:"Diana Prince"}]}]):b(y)})}catch(r){console.error("Error fetching exams:",r.message),m(r.message||"Error fetching exams.")}finally{o(!1)}})()},[]);const T=async()=>{try{const s={...a,facultyId:k.currentUser.uid,createdAt:new Date().toISOString(),status:"scheduled"};await J(p(h,"exams"),s),u(!1),l({courseId:"",courseName:"",examType:"Mid-term",date:"",time:"",location:"",syllabus:"",examPattern:"",duration:"",totalMarks:"",instructions:""}),window.location.reload()}catch(s){console.error("Error creating exam:",s),alert("Error creating exam. Please try again.")}},P=s=>{const r=new Date,n=new Date(s);return n<r?{status:"completed",color:"text-green-600",bg:"bg-green-100"}:n.toDateString()===r.toDateString()?{status:"today",color:"text-orange-600",bg:"bg-orange-100"}:{status:"upcoming",color:"text-blue-600",bg:"bg-blue-100"}};return D?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12 animate-fade-in",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded-2xl mb-6 animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-xl w-1/3 animate-pulse"})]}),e.jsx("div",{className:"grid gap-8 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((s,r)=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 animate-fade-in border border-gray-100",style:{animationDelay:`${r*100}ms`},children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mr-6 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 animate-pulse"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded-full animate-pulse"})]})]},r))})]})}):j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[e.jsx(t,{icon:L,className:"text-blue-600 text-6xl mb-6 animate-bounce"}),e.jsx("div",{className:"text-gray-800 text-xl font-semibold",children:j})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"mb-6 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(t,{icon:g,className:"text-blue-600"}),"Exam Management"]}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Create, manage, and track your course examinations"})]}),e.jsx("div",{className:"compact-card py-2 px-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{icon:g,className:"text-blue-600 text-sm"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Total Exams:"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:f.length})]})})]}),e.jsxs("div",{className:"bg-white border rounded-md p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx(t,{icon:v,className:"text-white text-sm"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create New Exam"})]}),e.jsxs("button",{onClick:()=>u(!x),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md text-sm hover:bg-green-700",children:[e.jsx(t,{icon:v}),x?"Cancel":"Create Exam"]})]}),x&&e.jsxs("div",{className:"mt-4 p-4 bg-white border rounded-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course"}),e.jsxs("select",{value:a.courseId,onChange:s=>{const r=N.find(n=>n.id===s.target.value);l({...a,courseId:s.target.value,courseName:r?r.courseName:""})},className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select Course"}),N.map(s=>e.jsx("option",{value:s.id,children:s.courseName},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Type"}),e.jsxs("select",{value:a.examType,onChange:s=>l({...a,examType:s.target.value}),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Mid-term",children:"Mid-term"}),e.jsx("option",{value:"Final",children:"Final"}),e.jsx("option",{value:"Quiz",children:"Quiz"}),e.jsx("option",{value:"Assignment",children:"Assignment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:a.date,onChange:s=>l({...a,date:s.target.value}),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),e.jsx("input",{type:"time",value:a.time,onChange:s=>l({...a,time:s.target.value}),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:a.location,onChange:s=>l({...a,location:s.target.value}),placeholder:"Room 101",className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),e.jsx("input",{type:"text",value:a.duration,onChange:s=>l({...a,duration:s.target.value}),placeholder:"2 hours",className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Marks"}),e.jsx("input",{type:"number",value:a.totalMarks,onChange:s=>l({...a,totalMarks:s.target.value}),placeholder:"50",className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Syllabus"}),e.jsx("input",{type:"text",value:a.syllabus,onChange:s=>l({...a,syllabus:s.target.value}),placeholder:"Chapters 1-5",className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Pattern"}),e.jsx("input",{type:"text",value:a.examPattern,onChange:s=>l({...a,examPattern:s.target.value}),placeholder:"Multiple Choice, Short Answer",className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),e.jsx("textarea",{value:a.instructions,onChange:s=>l({...a,instructions:s.target.value}),placeholder:"Exam instructions for students...",rows:"3",className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 border text-gray-700 rounded-md text-sm hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700",children:"Create Exam"})]})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:f.map((s,r)=>{const n=P(s.date);return e.jsxs("div",{className:"bg-white border rounded-md p-4 hover:shadow cursor-pointer transition",style:{animationDelay:`${r*100}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(t,{icon:g,className:"text-white text-sm"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-medium ${n.bg} ${n.color}`,children:n.status}),e.jsx(t,{icon:w,className:"text-indigo-400"})]})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:s.courseName}),e.jsxs("div",{className:"space-y-1.5 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[e.jsx(t,{icon:Q,className:"text-indigo-400"}),e.jsx("span",{className:"text-sm",children:s.examType})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[e.jsx(t,{icon:$,className:"text-indigo-400"}),e.jsx("span",{className:"text-sm",children:s.date})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[e.jsx(t,{icon:G,className:"text-indigo-400"}),e.jsx("span",{className:"text-sm",children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[e.jsx(t,{icon:O,className:"text-indigo-400"}),e.jsx("span",{className:"text-sm",children:s.location})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{icon:q,className:"text-indigo-400"}),e.jsxs("span",{children:[s.students?.length||0," Students"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{icon:C,className:"text-indigo-400"}),e.jsxs("span",{children:[s.totalMarks||"N/A"," Marks"]})]})]}),e.jsxs(d,{to:`/exams/${s.id}`,className:"inline-flex items-center gap-2 w-full justify-center px-3 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700",children:[e.jsx(t,{icon:w}),"View Details"]})]},s.id)})}),e.jsxs("div",{className:"bg-white border rounded-md p-4 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center",children:e.jsx(t,{icon:z,className:"text-white text-xs"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(d,{to:"/grades",className:"bg-white border rounded-md p-4 text-center hover:shadow transition",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(t,{icon:C,className:"text-white text-sm"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Grade Management"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Manage student grades"})]}),e.jsxs(d,{to:"/courses",className:"bg-white border rounded-md p-4 text-center hover:shadow transition",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(t,{icon:H,className:"text-white text-sm"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"My Courses"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"View your courses"})]}),e.jsxs(d,{to:"/home",className:"bg-white border rounded-md p-4 text-center hover:shadow transition",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(t,{icon:U,className:"text-white text-sm"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Return to dashboard"})]})]})]})]})})};export{ae as default};
//# sourceMappingURL=Exam-BanJO3Zu.js.map
