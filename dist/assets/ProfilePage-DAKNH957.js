import{j as e}from"./query-_HUGc1jU.js";import{r as b}from"./router-CGnu6c2M.js";import{u as T,d as y}from"./index-C7a0D0cT.js";import{h as D,j as E,q as $,w as z,l as L}from"./firebase-CGo28arV.js";import{F as a,l as S,j as J,P as M,A as _,C as Q,J as K,c as P,p as U,Q as V,N as W,o as H,R as X,x as Y,S as Z,B as F,T as ee}from"./ui-ZG8wUPwK.js";import"./vendor-Dazix4UH.js";const de=()=>{const{user:p}=T(),[B,v]=b.useState(!0),[s,R]=b.useState(null),[I,q]=b.useState([]),[w,G]=b.useState(!1);return b.useEffect(()=>{(async()=>{if(!p?.uid){v(!1);return}try{v(!0);const m=D(y,"faculty","CSE_DS","members",p.uid),k=await E(m);if(k.exists()){const t=k.data();R(t);const N=[];t.courses&&Array.isArray(t.courses)&&N.push(...t.courses),t.teaching&&(t.teaching.III_A&&Array.isArray(t.teaching.III_A)&&N.push(...t.teaching.III_A),Object.keys(t.teaching).forEach(l=>{l!=="III_A"&&Array.isArray(t.teaching[l])&&N.push(...t.teaching[l])}));const g=[...new Set(N)],se=[];console.log("üìö Course IDs from faculty data:",g);let n=[];try{console.log("üöÄ Strategy 1: CollectionGroup query...");const l=collectionGroup(y,"courseDetails"),j=$(l,z("instructor","==",p.uid));(await L(j)).forEach(r=>{const i=r.ref.path;console.log("üìç Found course at:",i);const d=i.split("/");let x,u,o;if(i.includes("year_sem")){const h=d.indexOf("year_sem");if(h+1<d.length){const f=d[h+1],[A,C]=f.split("_");x=A,o=C,u="A"}}else i.includes("courses/")&&(x=d[1],u=d[2],o=d[3]);n.push({id:r.id,year:x,section:u,semester:o,...r.data()})}),console.log("‚úÖ Strategy 1 found:",n.length,"courses")}catch(l){console.error("‚ùå Strategy 1 failed:",l)}if(n.length===0&&g.length>0){console.log("üöÄ Strategy 2: Direct path lookup...");const l=[];["III_1","III_2","III_3","III_4","III_5","III_6","III_7","III_8"].forEach(r=>{g.forEach(i=>{l.push({path:D(y,"courses","CSE_DS","year_sem",r,"courseDetails",i),yearSem:r,courseId:i})})}),["III","II","I","IV"].forEach(r=>{["A","B","C","D","E","F"].forEach(i=>{["sem1","sem2"].forEach(d=>{g.forEach(x=>{l.push({path:D(y,"courses",r,i,d,"courseDetails",x),year:r,section:i,semester:d,courseId:x})})})})});const j=l.map(async({path:r,yearSem:i,year:d,section:x,semester:u,courseId:o})=>{try{const h=await E(r);if(h.exists()){const f=h.data();if(console.log("üìç Found course at path:",r.path),i){const[A,C]=i.split("_");return{id:o,year:A,section:"A",semester:C,...f}}else return{id:o,year:d,section:x,semester:u,...f}}return null}catch{return null}});n=(await Promise.all(j)).filter(r=>r!==null),console.log("‚úÖ Strategy 2 found:",n.length,"courses")}n.length===0&&(console.log("üöÄ Strategy 3: Creating placeholder courses..."),n=g.map((l,j)=>({id:l,courseName:`Course ${j+1}`,courseCode:l,description:`Course assigned to ${t.name}`,instructor:t.name,credits:3,enrolledStudents:0,year:"III",section:"A",semester:"5"})),console.log("‚úÖ Strategy 3 created:",n.length,"placeholder courses")),console.log("üéâ Final courses to display:",n.length),q(n)}}catch(m){console.error("Error loading faculty data:",m)}finally{v(!1)}})()},[p]),B?e.jsx("div",{className:"compact-ui min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 shimmer rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 shimmer rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 shimmer rounded w-1/4 mb-1"}),e.jsx("div",{className:"h-4 shimmer rounded w-1/5"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((c,m)=>e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("div",{className:"w-10 h-10 shimmer rounded-full mx-auto mb-3"}),e.jsx("div",{className:"h-4 shimmer rounded w-1/2 mx-auto mb-2"}),e.jsx("div",{className:"h-6 shimmer rounded w-1/3 mx-auto"})]},m))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:4}).map((c,m)=>e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsx("div",{className:"h-5 shimmer rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((k,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 shimmer rounded w-1/3"}),e.jsx("div",{className:"h-10 shimmer rounded"})]},t))})]},m))})]})}):s?e.jsx("div",{className:"compact-ui min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(a,{icon:S,className:"text-white text-2xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),e.jsx("p",{className:"text-gray-600 mb-1",children:s.designation}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.department}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(a,{icon:J}),s.emailID]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(a,{icon:M}),s.contactNo]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(a,{icon:_}),s.empID]})]})]}),e.jsxs("button",{onClick:()=>G(!w),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(a,{icon:w?Q:K}),w?"Save":"Edit Profile"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(a,{icon:P})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:I.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Courses Teaching"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(a,{icon:U})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.experience}),e.jsx("div",{className:"text-sm text-gray-600",children:"Experience"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(a,{icon:V})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.qualifications}),e.jsx("div",{className:"text-sm text-gray-600",children:"Qualification"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(a,{icon:W})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.acadExperience}),e.jsx("div",{className:"text-sm text-gray-600",children:"Academic Exp."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:S,className:"text-blue-600"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("p",{className:"text-gray-900",children:s.dob})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),e.jsx("p",{className:"text-gray-900",children:s.bloodGroup})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Religion"}),e.jsx("p",{className:"text-gray-900",children:s.religion})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caste"}),e.jsx("p",{className:"text-gray-900",children:s.caste})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Caste"}),e.jsx("p",{className:"text-gray-900",children:s.subCaste})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin"}),e.jsx("p",{className:"text-gray-900",children:s.origin})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local Address"}),e.jsx("p",{className:"text-gray-900",children:s.localAddress})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permanent Address"}),e.jsx("p",{className:"text-gray-900",children:s.permAddress})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:H,className:"text-green-600"}),"Family Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father's Name"}),e.jsx("p",{className:"text-gray-900",children:s.fatherName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother's Name"}),e.jsx("p",{className:"text-gray-900",children:s.motherName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Name"}),e.jsx("p",{className:"text-gray-900",children:s.spouseName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship with Spouse"}),e.jsx("p",{className:"text-gray-900",children:s.relationshipWithSpouse})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:X,className:"text-purple-600"}),"Professional Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:s.empID})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Joining"}),e.jsx("p",{className:"text-gray-900",children:s.dateOfJoining})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:s.department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),e.jsx("p",{className:"text-gray-900",children:s.designation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Role"}),e.jsx("p",{className:"text-gray-900",children:s.depRole})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Level"}),e.jsx("p",{className:"text-gray-900",children:s.roleLevel})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area of Specialization"}),e.jsx("p",{className:"text-gray-900",children:s.areaOfSpecialization})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),e.jsx("p",{className:"text-gray-900",children:s.specialization})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:Y,className:"text-orange-600"}),"Educational Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification"}),e.jsx("p",{className:"text-gray-900",children:s.qualifications})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Degree"}),e.jsx("p",{className:"text-gray-900",children:s.degr})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Degree Date"}),e.jsx("p",{className:"text-gray-900",children:s.degrDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Experience"}),e.jsx("p",{className:"text-gray-900",children:s.acadExperience})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry Experience"}),e.jsxs("p",{className:"text-gray-900",children:[s.industryExperience," years"]})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:Z,className:"text-green-600"}),"Banking Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900",children:s.bankName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),e.jsx("p",{className:"text-gray-900",children:s.branch})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("p",{className:"text-gray-900",children:s.bankAccountNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IFSC Code"}),e.jsx("p",{className:"text-gray-900",children:s.ifsc})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Address"}),e.jsx("p",{className:"text-gray-900 text-sm",children:s.bankAddr})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:_,className:"text-red-600"}),"Government Documents"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aadhaar Number"}),e.jsx("p",{className:"text-gray-900",children:s.aadhaar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PAN Number"}),e.jsx("p",{className:"text-gray-900",children:s.pan})]})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:P,className:"text-blue-600"}),"Courses Currently Teaching"]}),I.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map((c,m)=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center",children:e.jsx(a,{icon:F})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:c.courseName||`Course ${m+1}`}),e.jsx("p",{className:"text-sm text-gray-600",children:c.courseCode||c.id})]})]}),c.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.credits&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:[c.credits," Credits"]}),c.semester&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:["Semester ",c.semester]})]})]},c.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(a,{icon:F,className:"text-gray-400 text-4xl mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No courses assigned yet."})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(a,{icon:ee,className:"text-gray-600"}),"System Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Complete"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.profileComplete?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.profileComplete?"Complete":"Incomplete"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Key"}),e.jsx("p",{className:"text-gray-900",children:s.departmentKey})]})]})]})]})}):e.jsx("div",{className:"compact-ui min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-white border rounded-lg p-6 text-center",children:[e.jsx(a,{icon:S,className:"text-gray-400 text-6xl mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600",children:"No faculty profile found for this user."})]})})})};export{de as default};
//# sourceMappingURL=ProfilePage-DAKNH957.js.map
