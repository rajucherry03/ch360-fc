{"version":3,"file":"Course-X8zqQ9AY.js","sources":["../../src/components/Course.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { collection, collectionGroup, getDocs, query, where, doc, getDoc } from \"firebase/firestore\";\r\nimport { auth, db } from \"../firebase\"; // Firebase configuration\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { \r\n  faChalkboardTeacher, \r\n  faBookOpen, \r\n  faUsers, \r\n  faCalendarAlt, \r\n  faClock, \r\n  faExclamationTriangle,\r\n  faGraduationCap,\r\n  faArrowRight,\r\n  faUser,\r\n  faIdCard,\r\n  faBuilding\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst FacultyCourseList = () => {\r\n  const [courses, setCourses] = useState([]);\r\n  const [facultyData, setFacultyData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n    const fetchFacultyCourses = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        onAuthStateChanged(auth, async (user) => {\r\n          if (!user) {\r\n            setError(\"No user is logged in.\");\r\n            setLoading(false);\r\n            return;\r\n          }\r\n\r\n          try {\r\n            console.log(\"üîç Starting course fetch for user:\", user.uid);\r\n            \r\n            // Step 1: Fetch faculty data\r\n            const facultyRef = doc(db, 'faculty', 'CSE_DS', 'members', user.uid);\r\n            const facultySnap = await getDoc(facultyRef);\r\n            \r\n            if (!facultySnap.exists()) {\r\n              setError(\"Faculty profile not found.\");\r\n              setCourses([]);\r\n              setLoading(false);\r\n              return;\r\n            }\r\n\r\n            const facultyData = facultySnap.data();\r\n            setFacultyData(facultyData);\r\n            console.log(\"‚úÖ Faculty data fetched:\", facultyData.name);\r\n\r\n            // Step 2: Get course IDs from faculty data\r\n            const allCourseIds = [];\r\n            \r\n            if (facultyData.courses && Array.isArray(facultyData.courses)) {\r\n              allCourseIds.push(...facultyData.courses);\r\n            }\r\n            \r\n            if (facultyData.teaching) {\r\n              Object.keys(facultyData.teaching).forEach(section => {\r\n                if (Array.isArray(facultyData.teaching[section])) {\r\n                  allCourseIds.push(...facultyData.teaching[section]);\r\n                }\r\n              });\r\n            }\r\n            \r\n            const uniqueCourseIds = [...new Set(allCourseIds)];\r\n            console.log(\"üìö Course IDs from faculty data:\", uniqueCourseIds);\r\n\r\n                         // DYNAMIC UNIVERSAL FETCH - Works with any Firestore structure\r\n             let foundCourses = [];\r\n\r\n             if (uniqueCourseIds.length > 0) {\r\n               console.log(\"üöÄ Dynamic course fetch using course IDs:\", uniqueCourseIds);\r\n               \r\n               // Dynamic course fetching function\r\n               const fetchCourseDynamically = async (courseId) => {\r\n                 // Strategy 1: Try exact path first (your current structure)\r\n                 try {\r\n                   const coursePath = doc(db, 'courses', 'CSE_DS', 'year_sem', 'III_5', 'courseDetails', courseId);\r\n                   const courseSnap = await getDoc(coursePath);\r\n                   if (courseSnap.exists()) {\r\n                     const courseData = courseSnap.data();\r\n                     console.log(\"‚úÖ Found course via exact path:\", courseData.courseName);\r\n                     return {\r\n                       id: courseId,\r\n                       year: courseData.displayYear || \"III\",\r\n                       section: courseData.displaySection || \"A\",\r\n                       semester: courseData.displaySemester || \"5\",\r\n                       courseName: courseData.courseName || `Course ${courseId}`,\r\n                       courseCode: courseData.courseCode || courseId,\r\n                       instructorName: facultyData.name,\r\n                       instructor: courseData.instructor,\r\n                       department: courseData.displayDepartment || \"Computer Science & Engineering (Data Science)\",\r\n                       credits: courseData.credits || 3,\r\n                       description: courseData.description || `Course ${courseId} - ${facultyData.name}`,\r\n                       studentsBySection: courseData.studentsBySection || {},\r\n                       masterCoursePath: courseData.masterCoursePath,\r\n                       semesterKey: courseData.semesterKey || \"III_5\",\r\n                       students: courseData.students || []\r\n                     };\r\n                   }\r\n                 } catch (error) {\r\n                   console.log(\"‚ùå Exact path failed for course:\", courseId);\r\n                 }\r\n\r\n                 // Strategy 2: Try collectionGroup query (universal)\r\n                 try {\r\n                   const cg = collectionGroup(db, \"courseDetails\");\r\n                   const q = query(cg, where(\"__name__\", \"==\", courseId));\r\n                   const snap = await getDocs(q);\r\n                   if (!snap.empty) {\r\n                     const courseData = snap.docs[0].data();\r\n                     console.log(\"‚úÖ Found course via collectionGroup:\", courseData.courseName);\r\n                     return {\r\n                       id: courseId,\r\n                       year: courseData.displayYear || \"III\",\r\n                       section: courseData.displaySection || \"A\",\r\n                       semester: courseData.displaySemester || \"5\",\r\n                       courseName: courseData.courseName || `Course ${courseId}`,\r\n                       courseCode: courseData.courseCode || courseId,\r\n                       instructorName: facultyData.name,\r\n                       instructor: courseData.instructor,\r\n                       department: courseData.displayDepartment || \"Computer Science & Engineering (Data Science)\",\r\n                       credits: courseData.credits || 3,\r\n                       description: courseData.description || `Course ${courseId} - ${facultyData.name}`,\r\n                       studentsBySection: courseData.studentsBySection || {},\r\n                       masterCoursePath: courseData.masterCoursePath,\r\n                       semesterKey: courseData.semesterKey || \"III_5\",\r\n                       students: courseData.students || []\r\n                     };\r\n                   }\r\n                 } catch (error) {\r\n                   console.log(\"‚ùå CollectionGroup failed for course:\", courseId);\r\n                 }\r\n\r\n                 // Strategy 3: Try multiple path variations dynamically\r\n                 const pathVariations = [\r\n                   // Your exact structure variations\r\n                   ['courses', 'CSE_DS', 'year_sem', 'III_5', 'courseDetails', courseId],\r\n                   ['courses', 'CSE_DS', 'year_sem', 'III_6', 'courseDetails', courseId],\r\n                   ['courses', 'CSE_DS', 'year_sem', 'III_7', 'courseDetails', courseId],\r\n                   ['courses', 'CSE_DS', 'year_sem', 'III_8', 'courseDetails', courseId],\r\n                   // Alternative structures\r\n                   ['courses', 'III', 'A', '5', 'courseDetails', courseId],\r\n                   ['courses', 'III', 'B', '5', 'courseDetails', courseId],\r\n                   ['courses', 'III', 'C', '5', 'courseDetails', courseId],\r\n                   // Direct course structure\r\n                   ['courses', courseId],\r\n                   ['courseDetails', courseId],\r\n                   // Department variations\r\n                   ['courses', 'CSE', 'year_sem', 'III_5', 'courseDetails', courseId],\r\n                   ['courses', 'CSEDS', 'year_sem', 'III_5', 'courseDetails', courseId],\r\n                 ];\r\n\r\n                 for (const pathSegments of pathVariations) {\r\n                   try {\r\n                     const coursePath = doc(db, ...pathSegments);\r\n                     const courseSnap = await getDoc(coursePath);\r\n                     if (courseSnap.exists()) {\r\n                       const courseData = courseSnap.data();\r\n                       console.log(\"‚úÖ Found course via path variation:\", pathSegments.join('/'));\r\n                       return {\r\n                         id: courseId,\r\n                         year: courseData.displayYear || \"III\",\r\n                         section: courseData.displaySection || \"A\",\r\n                         semester: courseData.displaySemester || \"5\",\r\n                         courseName: courseData.courseName || `Course ${courseId}`,\r\n                         courseCode: courseData.courseCode || courseId,\r\n                         instructorName: facultyData.name,\r\n                         instructor: courseData.instructor,\r\n                         department: courseData.displayDepartment || \"Computer Science & Engineering (Data Science)\",\r\n                         credits: courseData.credits || 3,\r\n                         description: courseData.description || `Course ${courseId} - ${facultyData.name}`,\r\n                         studentsBySection: courseData.studentsBySection || {},\r\n                         masterCoursePath: courseData.masterCoursePath,\r\n                         semesterKey: courseData.semesterKey || \"III_5\",\r\n                         students: courseData.students || []\r\n                       };\r\n                     }\r\n                   } catch (error) {\r\n                     // Continue to next variation\r\n                   }\r\n                 }\r\n\r\n                 console.log(\"‚ùå No course found for ID:\", courseId);\r\n                 return null;\r\n               };\r\n\r\n               // Fetch all courses dynamically\r\n               const coursePromises = uniqueCourseIds.map(courseId => fetchCourseDynamically(courseId));\r\n               const results = await Promise.all(coursePromises);\r\n               foundCourses = results.filter(course => course !== null);\r\n               console.log(\"‚úÖ Dynamic fetch found:\", foundCourses.length, \"courses\");\r\n             }\r\n\r\n            // Set the final result\r\n            console.log(\"üéâ Final courses to display:\", foundCourses.length);\r\n            setCourses(foundCourses);\r\n            setError(null);\r\n\r\n          } catch (error) {\r\n            console.error(\"‚ùå Error in course fetching:\", error);\r\n            setError(\"Error fetching faculty courses.\");\r\n            setCourses([]);\r\n          }\r\n\r\n          setLoading(false);\r\n        });\r\n      } catch (err) {\r\n        console.error(\"‚ùå Fatal error:\", err);\r\n        setError(\"Error fetching faculty courses.\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchFacultyCourses();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 p-8\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"mb-12 animate-fade-in\">\r\n            <div className=\"h-16 bg-gray-200 dark:bg-gray-700 rounded-2xl mb-6 animate-pulse\"></div>\r\n            <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded-xl w-1/3 animate-pulse\"></div>\r\n          </div>\r\n          <div className=\"grid gap-8 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\r\n            {Array.from({ length: 6 }).map((_, i) => (\r\n              <div key={i} className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 animate-fade-in border border-gray-200 dark:border-gray-700\" style={{ animationDelay: `${i * 100}ms` }}>\r\n                <div className=\"flex items-center mb-6\">\r\n                  <div className=\"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full mr-6 animate-pulse\"></div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3 animate-pulse\"></div>\r\n                    <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 animate-pulse\"></div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-3 mb-6\">\r\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse\"></div>\r\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3 animate-pulse\"></div>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <div className=\"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse\"></div>\r\n                  <div className=\"h-8 w-16 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse\"></div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-8\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center border border-gray-200 dark:border-gray-700\">\r\n          <FontAwesomeIcon icon={faExclamationTriangle} className=\"text-red-600 dark:text-red-400 text-6xl mb-6 animate-bounce\" />\r\n          <div className=\"text-gray-950 dark:text-white text-xl font-semibold\">{error}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (courses.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-8\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center border border-gray-200 dark:border-gray-700\">\r\n          <FontAwesomeIcon icon={faBookOpen} className=\"text-blue-600 dark:text-blue-400 text-6xl mb-6 animate-pulse\" />\r\n          <h3 className=\"text-2xl font-semibold text-gray-950 dark:text-white mb-3\">No courses available</h3>\r\n          <p className=\"text-gray-800 dark:text-gray-200 text-lg\">No courses have been assigned to this faculty yet.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Faculty Information Header */}\r\n        {facultyData && (\r\n          <div className=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 mb-8 shadow-lg\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center gap-4\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-white\">\r\n                <FontAwesomeIcon icon={faUser} className=\"text-xl\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h2 className=\"text-xl font-bold text-gray-950 dark:text-white mb-1\">{facultyData.name}</h2>\r\n                <p className=\"text-gray-800 dark:text-gray-200 mb-2\">{facultyData.designation} ‚Ä¢ {facultyData.department}</p>\r\n                <div className=\"flex flex-wrap gap-4 text-sm text-gray-800 dark:text-gray-200\">\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <FontAwesomeIcon icon={faIdCard} />\r\n                    {facultyData.empID}\r\n                  </span>\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <FontAwesomeIcon icon={faBuilding} />\r\n                    {facultyData.departmentKey}\r\n                  </span>\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <FontAwesomeIcon icon={faClock} />\r\n                    {facultyData.experience}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Course Header Card */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 shadow-lg mb-8\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\r\n            <div className=\"mb-4 lg:mb-0\">\r\n              <h1 className=\"text-3xl lg:text-4xl font-bold text-gray-950 dark:text-white flex items-center gap-3 mb-2\">\r\n                <div className=\"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-xl flex items-center justify-center shadow-lg\">\r\n                  <FontAwesomeIcon icon={faBookOpen} className=\"text-white text-lg\"/>\r\n                </div>\r\n                My Courses\r\n              </h1>\r\n              <p className=\"text-gray-800 dark:text-gray-200 text-base flex items-center gap-2\">\r\n                <FontAwesomeIcon icon={faChalkboardTeacher} className=\"text-gray-800 dark:text-gray-200\"/>\r\n                Here is the list of courses you are teaching ‚Ä¢ {courses.length} Total Courses\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <section className=\"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\r\n          {courses.map((course, index) => (\r\n            <div\r\n              key={course.id}\r\n              className=\"group bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-fade-in cursor-pointer hover:-translate-y-1\"\r\n              style={{ animationDelay: `${index * 100}ms` }}\r\n              onClick={() => {\r\n                // Always try to navigate with the full path structure\r\n                const courseYear = course.year || \"III\";\r\n                const courseSection = course.section || \"A\";\r\n                const courseSemester = course.semester || \"5\";\r\n                navigate(`/courses/${courseYear}/${courseSection}/${courseSemester}/courseDetails/${course.id}`);\r\n              }}\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300\">\r\n                  <FontAwesomeIcon icon={faBookOpen} className=\"text-lg\" />\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FontAwesomeIcon icon={faArrowRight} className=\"text-gray-800 dark:text-gray-200 text-sm group-hover:text-primary transition-colors\"/>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <h3 className=\"text-lg font-bold text-gray-950 dark:text-white mb-3 group-hover:text-secondary transition-colors\">\r\n                  {course.courseName || course.courseCode || `Course ${course.id}`}\r\n                </h3>\r\n                \r\n                <p className=\"text-gray-800 dark:text-gray-200 mb-4 line-clamp-2 text-sm leading-relaxed\">\r\n                  {course.description || course.courseDescription || `Course ${course.id} - ${course.instructorName || facultyData?.name || 'Faculty'}`}\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex flex-wrap gap-2 mb-4\">\r\n                {course.year && course.section && (\r\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-700\">\r\n                    <FontAwesomeIcon icon={faGraduationCap} className=\"mr-2\"/>\r\n                    {course.year}-{course.section}\r\n                  </span>\r\n                )}\r\n                {course.semester && (\r\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-700\">\r\n                    <FontAwesomeIcon icon={faCalendarAlt} className=\"mr-2\"/>\r\n                    {course.semester?.toUpperCase()}\r\n                  </span>\r\n                )}\r\n                {course.credits && (\r\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 border border-purple-200 dark:border-purple-700\">\r\n                    <FontAwesomeIcon icon={faClock} className=\"mr-2\"/>\r\n                    {course.credits} Credits\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"flex items-center justify-between text-xs text-gray-800 dark:text-gray-200 mb-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FontAwesomeIcon icon={faUsers} className=\"text-primary\"/>\r\n                  <span className=\"font-medium\">{course.students?.length || course.enrolledStudents || 0} Students</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FontAwesomeIcon icon={faChalkboardTeacher} className=\"text-primary\"/>\r\n                  <span className=\"font-medium\">{course.instructorName || course.instructor || facultyData?.name || \"Assigned\"}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3\">\r\n                {course.year && course.section && course.semester && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={(e) => { e.stopPropagation(); navigate(`/attendance/${course.year}/${course.section}/${course.semester}/${course.id}`); }}\r\n                    className=\"flex-1 bg-primary hover:bg-secondary text-white font-semibold px-4 py-2 rounded-xl text-sm transition-all duration-300 hover:shadow-md\"\r\n                  >\r\n                    Mark Attendance\r\n                  </button>\r\n                )}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => { \r\n                    e.stopPropagation(); \r\n                    const courseYear = course.year || \"III\";\r\n                    const courseSection = course.section || \"A\";\r\n                    const courseSemester = course.semester || \"5\";\r\n                    navigate(`/courses/${courseYear}/${courseSection}/${courseSemester}/courseDetails/${course.id}`);\r\n                  }}\r\n                  className=\"flex-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold px-4 py-2 rounded-xl text-sm transition-all duration-300 border border-gray-200 dark:border-gray-600\"\r\n                >\r\n                  View Details\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FacultyCourseList;\r\n\r\n"],"names":["FacultyCourseList","courses","setCourses","useState","facultyData","setFacultyData","loading","setLoading","error","setError","navigate","useNavigate","useEffect","onAuthStateChanged","auth","user","facultyRef","doc","db","facultySnap","getDoc","allCourseIds","section","uniqueCourseIds","foundCourses","fetchCourseDynamically","courseId","coursePath","courseSnap","courseData","cg","collectionGroup","q","query","where","snap","getDocs","pathVariations","pathSegments","coursePromises","course","err","jsxs","jsx","_","i","FontAwesomeIcon","faExclamationTriangle","faBookOpen","faUser","faIdCard","faBuilding","faClock","faChalkboardTeacher","index","courseYear","courseSection","courseSemester","faArrowRight","faGraduationCap","faCalendarAlt","faUsers","e"],"mappings":"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"}