import{j as e}from"./query-_HUGc1jU.js";import{r as h,u as P}from"./router-CGnu6c2M.js";import{o as k,h as S,j as D,k as B,q as K,w as Y,m as q}from"./firebase-BUGgE2xq.js";import{a as G,d as N}from"./index-DokKvUxf.js";import{F as i,s as R,z as w,l as T,w as U,$ as L,p as _,y as M,x as O,g as V,o as z,c as H}from"./ui-CbbphKl4.js";import"./vendor-Dazix4UH.js";const te=()=>{const[j,C]=h.useState([]),[l,$]=h.useState(null),[E,p]=h.useState(!0),[I,u]=h.useState(null),v=P();return h.useEffect(()=>{(async()=>{try{p(!0),u(null),k(G,async c=>{if(!c){u("No user is logged in."),p(!1);return}try{console.log("🔍 Starting course fetch for user:",c.uid);const o=S(N,"faculty","CSE_DS","members",c.uid),x=await D(o);if(!x.exists()){u("Faculty profile not found."),C([]),p(!1);return}const n=x.data();$(n),console.log("✅ Faculty data fetched:",n.name);const g=[];n.courses&&Array.isArray(n.courses)&&g.push(...n.courses),n.teaching&&Object.keys(n.teaching).forEach(b=>{Array.isArray(n.teaching[b])&&g.push(...n.teaching[b])});const f=[...new Set(g)];console.log("📚 Course IDs from faculty data:",f);let y=[];if(f.length>0){console.log("🚀 Dynamic course fetch using course IDs:",f);const b=async t=>{try{const m=S(N,"courses","CSE_DS","year_sem","III_5","courseDetails",t),d=await D(m);if(d.exists()){const r=d.data();return console.log("✅ Found course via exact path:",r.courseName),{id:t,year:r.displayYear||"III",section:r.displaySection||"A",semester:r.displaySemester||"5",courseName:r.courseName||`Course ${t}`,courseCode:r.courseCode||t,instructorName:n.name,instructor:r.instructor,department:r.displayDepartment||"Computer Science & Engineering (Data Science)",credits:r.credits||3,description:r.description||`Course ${t} - ${n.name}`,studentsBySection:r.studentsBySection||{},masterCoursePath:r.masterCoursePath,semesterKey:r.semesterKey||"III_5",students:r.students||[]}}}catch{console.log("❌ Exact path failed for course:",t)}try{const m=B(N,"courseDetails"),d=K(m,Y("__name__","==",t)),r=await q(d);if(!r.empty){const a=r.docs[0].data();return console.log("✅ Found course via collectionGroup:",a.courseName),{id:t,year:a.displayYear||"III",section:a.displaySection||"A",semester:a.displaySemester||"5",courseName:a.courseName||`Course ${t}`,courseCode:a.courseCode||t,instructorName:n.name,instructor:a.instructor,department:a.displayDepartment||"Computer Science & Engineering (Data Science)",credits:a.credits||3,description:a.description||`Course ${t} - ${n.name}`,studentsBySection:a.studentsBySection||{},masterCoursePath:a.masterCoursePath,semesterKey:a.semesterKey||"III_5",students:a.students||[]}}}catch{console.log("❌ CollectionGroup failed for course:",t)}const F=[["courses","CSE_DS","year_sem","III_5","courseDetails",t],["courses","CSE_DS","year_sem","III_6","courseDetails",t],["courses","CSE_DS","year_sem","III_7","courseDetails",t],["courses","CSE_DS","year_sem","III_8","courseDetails",t],["courses","III","A","5","courseDetails",t],["courses","III","B","5","courseDetails",t],["courses","III","C","5","courseDetails",t],["courses",t],["courseDetails",t],["courses","CSE","year_sem","III_5","courseDetails",t],["courses","CSEDS","year_sem","III_5","courseDetails",t]];for(const m of F)try{const d=S(N,...m),r=await D(d);if(r.exists()){const a=r.data();return console.log("✅ Found course via path variation:",m.join("/")),{id:t,year:a.displayYear||"III",section:a.displaySection||"A",semester:a.displaySemester||"5",courseName:a.courseName||`Course ${t}`,courseCode:a.courseCode||t,instructorName:n.name,instructor:a.instructor,department:a.displayDepartment||"Computer Science & Engineering (Data Science)",credits:a.credits||3,description:a.description||`Course ${t} - ${n.name}`,studentsBySection:a.studentsBySection||{},masterCoursePath:a.masterCoursePath,semesterKey:a.semesterKey||"III_5",students:a.students||[]}}}catch{}return console.log("❌ No course found for ID:",t),null},A=f.map(t=>b(t));y=(await Promise.all(A)).filter(t=>t!==null),console.log("✅ Dynamic fetch found:",y.length,"courses")}console.log("🎉 Final courses to display:",y.length),C(y),u(null)}catch(o){console.error("❌ Error in course fetching:",o),u("Error fetching faculty courses."),C([])}p(!1)})}catch(c){console.error("❌ Fatal error:",c),u("Error fetching faculty courses."),p(!1)}})()},[]),E?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12 animate-fade-in",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded-2xl mb-6 animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-xl w-1/3 animate-pulse"})]}),e.jsx("div",{className:"grid gap-8 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((s,c)=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 animate-fade-in border border-gray-100",style:{animationDelay:`${c*100}ms`},children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mr-6 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 animate-pulse"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded-full animate-pulse"})]})]},c))})]})}):I?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[e.jsx(i,{icon:R,className:"text-blue-600 text-6xl mb-6 animate-bounce"}),e.jsx("div",{className:"text-gray-800 text-xl font-semibold",children:I})]})}):j.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[e.jsx(i,{icon:w,className:"text-gray-400 text-6xl mb-6 animate-pulse"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-3",children:"No courses available"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No courses have been assigned to this faculty yet."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"page-container",children:[l&&e.jsx("div",{className:"bg-white border rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(i,{icon:T,className:"text-white text-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:l.name}),e.jsxs("p",{className:"text-gray-600 mb-2",children:[l.designation," • ",l.department]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{icon:U}),l.empID]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{icon:L}),l.departmentKey]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{icon:_}),l.experience]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"My Courses"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Here is the list of courses you are teaching"})]}),e.jsx("div",{className:"compact-card py-2 px-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{icon:w,className:"text-blue-600 text-sm"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Total Courses:"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:j.length})]})})]}),e.jsx("section",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:j.map((s,c)=>e.jsxs("div",{className:"group bg-white rounded-lg border p-4 hover:shadow-sm animate-fade-in cursor-pointer",style:{animationDelay:`${c*100}ms`},onClick:()=>{const o=s.year||"III",x=s.section||"A",n=s.semester||"5";v(`/courses/${o}/${x}/${n}/courseDetails/${s.id}`)},children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 text-blue-600 flex items-center justify-center",children:e.jsx(i,{icon:w,className:"text-sm"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(i,{icon:M,className:"text-blue-600 text-sm"})})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:s.courseName||s.courseCode||`Course ${s.id}`}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2 text-sm",children:s.description||s.courseDescription||`Course ${s.id} - ${s.instructorName||l?.name||"Faculty"}`}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.year&&s.section&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 border border-blue-200",children:[e.jsx(i,{icon:O,className:"mr-2"}),s.year,"-",s.section]}),s.semester&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700 border border-purple-200",children:[e.jsx(i,{icon:V,className:"mr-2"}),s.semester?.toUpperCase()]}),s.credits&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:[e.jsx(i,{icon:_,className:"mr-2"}),s.credits," Credits"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{icon:z,className:"text-blue-600"}),e.jsxs("span",{className:"font-medium",children:[s.students?.length||s.enrolledStudents||0," Students"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{icon:H,className:"text-blue-600"}),e.jsx("span",{className:"font-medium",children:s.instructorName||s.instructor||l?.name||"Assigned"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[s.year&&s.section&&s.semester&&e.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),v(`/attendance/${s.year}/${s.section}/${s.semester}/${s.id}`)},className:"btn-campus-primary px-3 py-2 rounded-md text-sm",children:"Mark Attendance"}),e.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const x=s.year||"III",n=s.section||"A",g=s.semester||"5";v(`/courses/${x}/${n}/${g}/courseDetails/${s.id}`)},className:"px-3 py-2 rounded-md border border-gray-300 hover:bg-gray-100 text-sm",children:"View Details"})]})]},s.id))})]})})};export{te as default};
//# sourceMappingURL=Course-BrLPjOZD.js.map
