import{j as e}from"./query-_HUGc1jU.js";import{r as h,u as P}from"./router-CGnu6c2M.js";import{o as B,h as C,j as w,k as K,q,w as Y,l as G}from"./firebase-CGo28arV.js";import{a as R,d as N}from"./index-DAak1JJl.js";import{F as i,v as T,t as S,m as U,E as L,C as M,q as I,c as _,y as O,x as V,h as H,p as z}from"./ui-BE1NG-gw.js";import"./vendor-Dazix4UH.js";const ae=()=>{const[j,k]=h.useState([]),[l,$]=h.useState(null),[E,u]=h.useState(!0),[D,g]=h.useState(null),v=P();return h.useEffect(()=>{(async()=>{try{u(!0),g(null),B(R,async o=>{if(!o){g("No user is logged in."),u(!1);return}try{console.log("🔍 Starting course fetch for user:",o.uid);const c=C(N,"faculty","CSE_DS","members",o.uid),x=await w(c);if(!x.exists()){g("Faculty profile not found."),k([]),u(!1);return}const n=x.data();$(n),console.log("✅ Faculty data fetched:",n.name);const y=[];n.courses&&Array.isArray(n.courses)&&y.push(...n.courses),n.teaching&&Object.keys(n.teaching).forEach(b=>{Array.isArray(n.teaching[b])&&y.push(...n.teaching[b])});const p=[...new Set(y)];console.log("📚 Course IDs from faculty data:",p);let f=[];if(p.length>0){console.log("🚀 Dynamic course fetch using course IDs:",p);const b=async a=>{try{const d=C(N,"courses","CSE_DS","year_sem","III_5","courseDetails",a),m=await w(d);if(m.exists()){const t=m.data();return console.log("✅ Found course via exact path:",t.courseName),{id:a,year:t.displayYear||"III",section:t.displaySection||"A",semester:t.displaySemester||"5",courseName:t.courseName||`Course ${a}`,courseCode:t.courseCode||a,instructorName:n.name,instructor:t.instructor,department:t.displayDepartment||"Computer Science & Engineering (Data Science)",credits:t.credits||3,description:t.description||`Course ${a} - ${n.name}`,studentsBySection:t.studentsBySection||{},masterCoursePath:t.masterCoursePath,semesterKey:t.semesterKey||"III_5",students:t.students||[]}}}catch{console.log("❌ Exact path failed for course:",a)}try{const d=K(N,"courseDetails"),m=q(d,Y("__name__","==",a)),t=await G(m);if(!t.empty){const r=t.docs[0].data();return console.log("✅ Found course via collectionGroup:",r.courseName),{id:a,year:r.displayYear||"III",section:r.displaySection||"A",semester:r.displaySemester||"5",courseName:r.courseName||`Course ${a}`,courseCode:r.courseCode||a,instructorName:n.name,instructor:r.instructor,department:r.displayDepartment||"Computer Science & Engineering (Data Science)",credits:r.credits||3,description:r.description||`Course ${a} - ${n.name}`,studentsBySection:r.studentsBySection||{},masterCoursePath:r.masterCoursePath,semesterKey:r.semesterKey||"III_5",students:r.students||[]}}}catch{console.log("❌ CollectionGroup failed for course:",a)}const F=[["courses","CSE_DS","year_sem","III_5","courseDetails",a],["courses","CSE_DS","year_sem","III_6","courseDetails",a],["courses","CSE_DS","year_sem","III_7","courseDetails",a],["courses","CSE_DS","year_sem","III_8","courseDetails",a],["courses","III","A","5","courseDetails",a],["courses","III","B","5","courseDetails",a],["courses","III","C","5","courseDetails",a],["courses",a],["courseDetails",a],["courses","CSE","year_sem","III_5","courseDetails",a],["courses","CSEDS","year_sem","III_5","courseDetails",a]];for(const d of F)try{const m=C(N,...d),t=await w(m);if(t.exists()){const r=t.data();return console.log("✅ Found course via path variation:",d.join("/")),{id:a,year:r.displayYear||"III",section:r.displaySection||"A",semester:r.displaySemester||"5",courseName:r.courseName||`Course ${a}`,courseCode:r.courseCode||a,instructorName:n.name,instructor:r.instructor,department:r.displayDepartment||"Computer Science & Engineering (Data Science)",credits:r.credits||3,description:r.description||`Course ${a} - ${n.name}`,studentsBySection:r.studentsBySection||{},masterCoursePath:r.masterCoursePath,semesterKey:r.semesterKey||"III_5",students:r.students||[]}}}catch{}return console.log("❌ No course found for ID:",a),null},A=p.map(a=>b(a));f=(await Promise.all(A)).filter(a=>a!==null),console.log("✅ Dynamic fetch found:",f.length,"courses")}console.log("🎉 Final courses to display:",f.length),k(f),g(null)}catch(c){console.error("❌ Error in course fetching:",c),g("Error fetching faculty courses."),k([])}u(!1)})}catch(o){console.error("❌ Fatal error:",o),g("Error fetching faculty courses."),u(!1)}})()},[]),E?e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12 animate-fade-in",children:[e.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded-2xl mb-6 animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-xl w-1/3 animate-pulse"})]}),e.jsx("div",{className:"grid gap-8 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((s,o)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 animate-fade-in border border-gray-200 dark:border-gray-700",style:{animationDelay:`${o*100}ms`},children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full mr-6 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3 animate-pulse"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),e.jsx("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"})]})]},o))})]})}):D?e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx(i,{icon:T,className:"text-red-600 dark:text-red-400 text-6xl mb-6 animate-bounce"}),e.jsx("div",{className:"text-gray-950 dark:text-white text-xl font-semibold",children:D})]})}):j.length===0?e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx(i,{icon:S,className:"text-blue-600 dark:text-blue-400 text-6xl mb-6 animate-pulse"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-950 dark:text-white mb-3",children:"No courses available"}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-lg",children:"No courses have been assigned to this faculty yet."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[l&&e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 mb-8 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-white",children:e.jsx(i,{icon:U,className:"text-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-950 dark:text-white mb-1",children:l.name}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200 mb-2",children:[l.designation," • ",l.department]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-800 dark:text-gray-200",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{icon:L}),l.empID]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{icon:M}),l.departmentKey]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{icon:I}),l.experience]})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 shadow-lg mb-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-950 dark:text-white flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(i,{icon:S,className:"text-white text-lg"})}),"My Courses"]}),e.jsxs("p",{className:"text-gray-800 dark:text-gray-200 text-base flex items-center gap-2",children:[e.jsx(i,{icon:_,className:"text-gray-800 dark:text-gray-200"}),"Here is the list of courses you are teaching • ",j.length," Total Courses"]})]})})}),e.jsx("section",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:j.map((s,o)=>e.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-fade-in cursor-pointer hover:-translate-y-1",style:{animationDelay:`${o*100}ms`},onClick:()=>{const c=s.year||"III",x=s.section||"A",n=s.semester||"5";v(`/courses/${c}/${x}/${n}/courseDetails/${s.id}`)},children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(i,{icon:S,className:"text-lg"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(i,{icon:O,className:"text-gray-800 dark:text-gray-200 text-sm group-hover:text-primary transition-colors"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-950 dark:text-white mb-3 group-hover:text-secondary transition-colors",children:s.courseName||s.courseCode||`Course ${s.id}`}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200 mb-4 line-clamp-2 text-sm leading-relaxed",children:s.description||s.courseDescription||`Course ${s.id} - ${s.instructorName||l?.name||"Faculty"}`})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.year&&s.section&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-700",children:[e.jsx(i,{icon:V,className:"mr-2"}),s.year,"-",s.section]}),s.semester&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-700",children:[e.jsx(i,{icon:H,className:"mr-2"}),s.semester?.toUpperCase()]}),s.credits&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 border border-purple-200 dark:border-purple-700",children:[e.jsx(i,{icon:I,className:"mr-2"}),s.credits," Credits"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-800 dark:text-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{icon:z,className:"text-primary"}),e.jsxs("span",{className:"font-medium",children:[s.students?.length||s.enrolledStudents||0," Students"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{icon:_,className:"text-primary"}),e.jsx("span",{className:"font-medium",children:s.instructorName||s.instructor||l?.name||"Assigned"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[s.year&&s.section&&s.semester&&e.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),v(`/attendance/${s.year}/${s.section}/${s.semester}/${s.id}`)},className:"flex-1 bg-primary hover:bg-secondary text-white font-semibold px-4 py-2 rounded-xl text-sm transition-all duration-300 hover:shadow-md",children:"Mark Attendance"}),e.jsx("button",{type:"button",onClick:c=>{c.stopPropagation();const x=s.year||"III",n=s.section||"A",y=s.semester||"5";v(`/courses/${x}/${n}/${y}/courseDetails/${s.id}`)},className:"flex-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold px-4 py-2 rounded-xl text-sm transition-all duration-300 border border-gray-200 dark:border-gray-600",children:"View Details"})]})]},s.id))})]})})};export{ae as default};
//# sourceMappingURL=Course-X8zqQ9AY.js.map
