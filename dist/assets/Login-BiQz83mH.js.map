{"version":3,"file":"Login-BiQz83mH.js","sources":["../../src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react'; \r\nimport { useNavigate } from 'react-router-dom';\r\nimport { signInWithEmailAndPassword, sendPasswordResetEmail, setPersistence, browserLocalPersistence } from 'firebase/auth';\r\nimport { auth } from '../firebase'; // Import auth from your firebase.js file\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const mapAuthError = (code) => {\r\n    switch (code) {\r\n      case 'auth/invalid-credential':\r\n      case 'auth/wrong-password':\r\n        return 'Invalid email or password.';\r\n      case 'auth/user-not-found':\r\n        return 'No user found with this email.';\r\n      case 'auth/too-many-requests':\r\n        return 'Too many attempts. Please try again later or reset your password.';\r\n      case 'auth/user-disabled':\r\n        return 'This account has been disabled.';\r\n      case 'auth/network-request-failed':\r\n        return 'Network error. Check your internet connection.';\r\n      default:\r\n        return 'Login failed. Please try again.';\r\n    }\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const trimmedEmail = email.trim().toLowerCase();\r\n      const pwd = password;\r\n      await setPersistence(auth, browserLocalPersistence);\r\n      await signInWithEmailAndPassword(auth, trimmedEmail, pwd);\r\n      toast.success('Login Successfully!', {\r\n        position: 'top-right',\r\n        autoClose: 3000,\r\n      });\r\n      navigate('/home', { replace: true });\r\n    } catch (err) {\r\n      console.error('Login error:', err?.code, err?.message);\r\n      const message = mapAuthError(err?.code);\r\n      toast.error(message, {\r\n        position: 'top-right',\r\n        autoClose: 3000,\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForgetPassword = async () => {\r\n    if (!email) {\r\n      toast.error('Please enter your email to reset password.', {\r\n        position: 'top-right',\r\n        autoClose: 3000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await sendPasswordResetEmail(auth, email.trim().toLowerCase());\r\n      toast.success('Password reset email sent! Check your inbox.', {\r\n        position: 'top-right',\r\n        autoClose: 3000,\r\n      });\r\n    } catch (err) {\r\n      console.error('Reset error:', err?.code, err?.message);\r\n      const message = mapAuthError(err?.code);\r\n      toast.error(message, {\r\n        position: 'top-right',\r\n        autoClose: 3000,\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-campus-dark\">\r\n      <div className=\"glass rounded-xl shadow-lg p-8 w-full max-w-md border border-orange-400\">\r\n        <h2 className=\"text-2xl font-bold text-center gradient-text mb-6\">Login to CampusHub360</h2>\r\n        <form onSubmit={handleLogin}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-gray-300 mb-2\" htmlFor=\"email\">\r\n              Email Address\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              className=\"input-campus w-full p-3 rounded-lg\"\r\n              placeholder=\"Enter your email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-gray-300 mb-2\" htmlFor=\"password\">\r\n              Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              className=\"input-campus w-full p-3 rounded-lg\"\r\n              placeholder=\"Enter your password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className={`w-full py-3 rounded-lg font-semibold transition duration-300 ${\r\n              loading\r\n                ? 'bg-gray-600 cursor-not-allowed'\r\n                : 'btn-campus-primary'\r\n            }`}\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'Logging in...' : 'Login'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-4 text-center\">\r\n          <button\r\n            onClick={handleForgetPassword}\r\n            className=\"text-orange-400 hover:text-orange-300 hover:underline\"\r\n          >\r\n            Forgot Password?\r\n          </button>\r\n        </div>\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-gray-400\">\r\n            Don't have an account?{' '}\r\n            <a href=\"/signup\" className=\"text-orange-400 hover:text-orange-300 hover:underline\">\r\n              Sign up\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["Login","email","setEmail","useState","password","setPassword","loading","setLoading","navigate","useNavigate","mapAuthError","code","handleLogin","e","trimmedEmail","pwd","setPersistence","auth","browserLocalPersistence","signInWithEmailAndPassword","toast","err","message","handleForgetPassword","sendPasswordResetEmail","jsxs","jsx"],"mappings":"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"}